import { e } from '../../helpers';
export function propertyToVCardString(property) {
    let str = '';
    if (property.language) {
        str += ';LANGUAGE=' + e(property.language);
    }
    if (property.value) {
        str += ';VALUE=' + e(property.value);
    }
    if (property.altid) {
        str += ';ALTID=' + e(property.altid);
    }
    if (property.pid) {
        str += ';PID=' + property.pid.map(s => e(s)).join(',');
    }
    if (property.type) {
        if (Array.isArray(property.type)) {
            if (property.type.length === 1) {
                str += ';TYPE=' + property.type[0];
            }
            else {
                str += ';TYPE="' + property.type.map(s => s.toLowerCase()).join(',') + '"';
            }
        }
        else {
            str += ';TYPE=' + property.type;
        }
    }
    if (property.mediatype) {
        str += ';MEDIATYPE=' + e(property.mediatype);
    }
    if (property.pref) {
        str += ';PREF=' + property.pref;
    }
    if (property.calscale) {
        str += ';CALSCALE=' + e(property.calscale);
    }
    if (property.sortas) {
        str += ';SORT-AS="' + property.sortas.map(s => e(s)).join(',') + '"';
    }
    if (property.geo) {
        str += ';GEO=' + e(property.geo);
    }
    if (property.timezone) {
        str += ';TZ=' + e(property.timezone);
    }
    return str;
}
export function isPropertyWithParameters(object) {
    const test = object;
    if (test == null || test.param == null || test.value == null) {
        return false;
    }
    return (test.param.language !== undefined ||
        test.param.value !== undefined ||
        test.param.pref !== undefined ||
        test.param.altid !== undefined ||
        test.param.pid !== undefined ||
        test.param.type !== undefined ||
        test.param.mediatype !== undefined ||
        test.param.calscale !== undefined ||
        test.param.sortas !== undefined ||
        test.param.geo !== undefined ||
        test.param.timezone !== undefined);
}
export function isPropertyWithParametersAddressValue(object) {
    const test = object;
    if (test == null || test.param == null || test.value == null) {
        return false;
    }
    return (test.param.language !== undefined ||
        test.param.value !== undefined ||
        test.param.pref !== undefined ||
        test.param.altid !== undefined ||
        test.param.pid !== undefined ||
        test.param.type !== undefined ||
        test.param.mediatype !== undefined ||
        test.param.calscale !== undefined ||
        test.param.sortas !== undefined ||
        test.param.geo !== undefined ||
        test.param.timezone !== undefined);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQmFzaWNQcm9wZXJ0eVBhcmFtZXRlcnMudHlwZS5qcyIsInNvdXJjZVJvb3QiOiJDOi9Vc2Vycy9TdGVwaGFuaWUvRG9jdW1lbnRzL25neC12Y2FyZC9wcm9qZWN0cy9uZ3gtdmNhcmQvc3JjLyIsInNvdXJjZXMiOlsibGliL3R5cGVzL3BhcmFtZXRlci9CYXNpY1Byb3BlcnR5UGFyYW1ldGVycy50eXBlLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUNBLE9BQU8sRUFBRSxDQUFDLEVBQUUsTUFBTSxlQUFlLENBQUM7QUE2TWxDLE1BQU0sVUFBVSxxQkFBcUIsQ0FBQyxRQUFpQztJQUNyRSxJQUFJLEdBQUcsR0FBRyxFQUFFLENBQUM7SUFDYixJQUFJLFFBQVEsQ0FBQyxRQUFRLEVBQUU7UUFDckIsR0FBRyxJQUFJLFlBQVksR0FBRyxDQUFDLENBQUMsUUFBUSxDQUFDLFFBQVEsQ0FBQyxDQUFDO0tBQzVDO0lBQ0QsSUFBSSxRQUFRLENBQUMsS0FBSyxFQUFFO1FBQ2xCLEdBQUcsSUFBSSxTQUFTLEdBQUcsQ0FBQyxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQztLQUN0QztJQUNELElBQUksUUFBUSxDQUFDLEtBQUssRUFBRTtRQUNsQixHQUFHLElBQUksU0FBUyxHQUFHLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7S0FDdEM7SUFDRCxJQUFJLFFBQVEsQ0FBQyxHQUFHLEVBQUU7UUFDaEIsR0FBRyxJQUFJLE9BQU8sR0FBRyxRQUFRLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztLQUN4RDtJQUNELElBQUksUUFBUSxDQUFDLElBQUksRUFBRTtRQUNqQixJQUFJLEtBQUssQ0FBQyxPQUFPLENBQUMsUUFBUSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2hDLElBQUksUUFBUSxDQUFDLElBQUksQ0FB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QUU7UUFDNUQsT0FBTyxLQUFLLENBQUM7S0FDZDtJQUNELE9BQU8sQ0FDTCxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsS0FBSyxTQUFTO1FBQ2pDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxLQUFLLFNBQVM7UUFDOUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssU0FBUztRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssS0FBSyxTQUFTO1FBQzlCLElBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLFNBQVM7UUFDNUIsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLEtBQUssU0FBUztRQUM3QixJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsS0FBSyxTQUFTO1FBQ2xDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxLQUFLLFNBQVM7UUFDakMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEtBQUssU0FBUztRQUMvQixJQUFJLENBQUMsS0FBSyxDQUFDLEdBQUcsS0FBSyxTQUFTO1FBQzVCLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxLQUFLLFNBQVMsQ0FDbEMsQ0FBQztBQUNKLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBZGRyZXNzIH0gZnJvbSAnLi4vdkNhcmQnO1xyXG5pbXBvcnQgeyBlIH0gZnJvbSAnLi4vLi4vaGVscGVycyc7XHJcblxyXG4vKipcclxuICogQSBwcm9wZXJ0eSBjYW4gaGF2ZSBhdHRyaWJ1dGVzIGFzc29jaWF0ZWQgd2l0aCBpdC5cclxuICogVGhlc2UgXCJwcm9wZXJ0eSBwYXJhbWV0ZXJzXCIgY29udGFpbiBtZXRhLWluZm9ybWF0aW9uIGFib3V0IHRoZSBwcm9wZXJ0eSBvciB0aGUgcHJvcGVydHkgdmFsdWUuXHJcbiAqIEBsaW5rIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzUwI3NlY3Rpb24tNVxyXG4gKi9cclxuZXhwb3J0IGludGVyZmFjZSBCYXNpY1Byb3BlcnR5UGFyYW1ldGVycyB7XHJcbiAgLyoqXHJcbiAgICogVGhlIExBTkdVQUdFIHByb3BlcnR5IHBhcmFtZXRlciBpcyB1c2VkIHRvIGlkZW50aWZ5IGRhdGEgaW4gbXVsdGlwbGUgbGFuZ3VhZ2VzLlxyXG4gICAqIEBraW5kIFByb3BlcnR5OiBMQU5HVUFHRVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzUwI3NlY3Rpb24tNS4xXHJcbiAgICpcclxuICAgKi9cclxuICBsYW5ndWFnZT86IHN0cmluZztcclxuICAvKipcclxuICAgKiBUaGUgVkFMVUUgcGFyYW1ldGVyIGlzIE9QVElPTkFMLCB1c2VkIHRvIGlkZW50aWZ5IHRoZSB2YWx1ZSB0eXBlIChkYXRhIHR5cGUpIGFuZCBmb3JtYXQgb2YgdGhlIHZhbHVlLlxyXG4gICAqIEBraW5kIFByb3BlcnR5OiBWQUxVRVxyXG4gICAqIEBsaW5rIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzUwI3NlY3Rpb24tNS4yXHJcbiAgICovXHJcbiAgdmFsdWU/OlxyXG4gICAgfCAndGV4dCdcclxuICAgIHwgJ3VyaSdcclxuICAgIHwgJ2RhdGUnXHJcbiAgICB8ICd0aW1lJ1xyXG4gICAgfCAnZGF0ZS10aW1lJ1xyXG4gICAgfCAnZGF0ZS1hbmQtb3ItdGltZSdcclxuICAgIHwgJ3RpbWVzdGFtcCdcclxuICAgIHwgJ2Jvb2xlYW4nXHJcbiAgICB8ICdpbnRlZ2VyJ1xyXG4gICAgfCAnZmxvYXQnXHJcbiAgICB8ICd1dGMtb2Zmc2V0J1xyXG4gICAgfCAnbGFuZ3VhZ2UtdGFnJztcclxuICAvKipcclxuICAgKiBUaGUgUFJFRiBwYXJhbWV0ZXIgaXMgT1BUSU9OQUwgYW5kIGlzIHVzZWQgdG8gaW5kaWNhdGUgdGhhdCB0aGUgY29ycmVzcG9uZGluZyBpbnN0YW5jZSBvZiBhIHByb3BlcnR5IGlzIHByZWZlcnJlZCBieSB0aGUgdkNhcmQgYXV0aG9yLlxyXG4gICAqIEl0cyB2YWx1ZSBNVVNUIGJlIGFuIGludGVnZXIgYmV0d2VlbiAxIGFuZCAxMDAgdGhhdCBxdWFudGlmaWVzIHRoZSBsZXZlbCBvZiBwcmVmZXJlbmNlLlxyXG4gICAqIExvd2VyIHZhbHVlcyBjb3JyZXNwb25kIHRvIGEgaGlnaGVyIGxldmVsIG9mIHByZWZlcmVuY2UsIHdpdGggMSBiZWluZyBtb3N0IHByZWZlcnJlZC5cclxuICAgKiBAa2luZCBQcm9wZXJ0eTogUFJFRlxyXG4gICAqIEBsaW5rIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzUwI3NlY3Rpb24tNS4zXHJcbiAgICovXHJcbiAgcHJlZj86XHJcbiAgICB8IDFcclxuICAgIHwgMlxyXG4gICAgfCAzXHJcbiAgICB8IDRcclxuICAgIHwgNVxyXG4gICAgfCA2XHJcbiAgICB8IDdcclxuICAgIHwgOFxyXG4gICAgfCA5XHJcbiAgICB8IDEwXHJcbiAgICB8IDExXHJcbiAgICB8IDEyXHJcbiAgICB8IDEzXHJcbiAgICB8IDE0XHJcbiAgICB8IDE1XHJcbiAgICB8IDE2XHJcbiAgICB8IDE3XHJcbiAgICB8IDE4XHJcbiAgICB8IDE5XHJcbiAgICB8IDIwXHJcbiAgICB8IDIxXHJcbiAgICB8IDIyXHJcbiAgICB8IDIzXHJcbiAgICB8IDI0XHJcbiAgICB8IDI1XHJcbiAgICB8IDI2XHJcbiAgICB8IDI3XHJcbiAgICB8IDI4XHJcbiAgICB8IDI5XHJcbiAgICB8IDMwXHJcbiAgICB8IDMxXHJcbiAgICB8IDMyXHJcbiAgICB8IDMzXHJcbiAgICB8IDM0XHJcbiAgICB8IDM1XHJcbiAgICB8IDM2XHJcbiAgICB8IDM3XHJcbiAgICB8IDM4XHJcbiAgICB8IDM5XHJcbiAgICB8IDQwXHJcbiAgICB8IDQxXHJcbiAgICB8IDQyXHJcbiAgICB8IDQzXHJcbiAgICB8IDQ0XHJcbiAgICB8IDQ1XHJcbiAgICB8IDQ2XHJcbiAgICB8IDQ3XHJcbiAgICB8IDQ4XHJcbiAgICB8IDQ5XHJcbiAgICB8IDUwXHJcbiAgICB8IDUxXHJcbiAgICB8IDUyXHJcbiAgICB8IDUzXHJcbiAgICB8IDU0XHJcbiAgICB8IDU1XHJcbiAgICB8IDU2XHJcbiAgICB8IDU3XHJcbiAgICB8IDU4XHJcbiAgICB8IDU5XHJcbiAgICB8IDYwXHJcbiAgICB8IDYxXHJcbiAgICB8IDYyXHJcbiAgICB8IDYzXHJcbiAgICB8IDY0XHJcbiAgICB8IDY1XHJcbiAgICB8IDY2XHJcbiAgICB8IDY3XHJcbiAgICB8IDY4XHJcbiAgICB8IDY5XHJcbiAgICB8IDcwXHJcbiAgICB8IDcxXHJcbiAgICB8IDcyXHJcbiAgICB8IDczXHJcbiAgICB8IDc0XHJcbiAgICB8IDc1XHJcbiAgICB8IDc2XHJcbiAgICB8IDc3XHJcbiAgICB8IDc4XHJcbiAgICB8IDc5XHJcbiAgICB8IDgwXHJcbiAgICB8IDgxXHJcbiAgICB8IDgyXHJcbiAgICB8IDgzXHJcbiAgICB8IDg0XHJcbiAgICB8IDg1XHJcbiAgICB8IDg2XHJcbiAgICB8IDg3XHJcbiAgICB8IDg4XHJcbiAgICB8IDg5XHJcbiAgICB8IDkwXHJcbiAgICB8IDkxXHJcbiAgICB8IDkyXHJcbiAgICB8IDkzXHJcbiAgICB8IDk0XHJcbiAgICB8IDk1XHJcbiAgICB8IDk2XHJcbiAgICB8IDk3XHJcbiAgICB8IDk4XHJcbiAgICB8IDk5XHJcbiAgICB8IDEwMDtcclxuICAvKipcclxuICAgKiBUaGUgQUxUSUQgcGFyYW1ldGVyIGlzIHVzZWQgdG8gXCJ0YWdcIiBwcm9wZXJ0eSBpbnN0YW5jZXMgYXMgYmVpbmcgYWx0ZXJuYXRpdmUgcmVwcmVzZW50YXRpb25zIG9mIHRoZSBzYW1lIGxvZ2ljYWwgcHJvcGVydHkuXHJcbiAgICogRm9yIGV4YW1wbGUsIHRyYW5zbGF0aW9ucyBvZiBhIHByb3BlcnR5IGluIG11bHRpcGxlIGxhbmd1YWdlcyBnZW5lcmF0ZXMgbXVsdGlwbGUgcHJvcGVydHkgaW5zdGFuY2VzXHJcbiAgICogaGF2aW5nIGRpZmZlcmVudCBMQU5HVUFHRSBwYXJhbWV0ZXIgdGhhdCBhcmUgdGFnZ2VkIHdpdGggdGhlIHNhbWUgQUxUSUQgdmFsdWUuXHJcbiAgICogQGtpbmQgUHJvcGVydHk6IEFMVElEXHJcbiAgICogQGxpbmsgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzNTAjc2VjdGlvbi01LjRcclxuICAgKi9cclxuICBhbHRpZD86IHN0cmluZztcclxuICAvKipcclxuICAgKiBUaGUgUElEIHBhcmFtZXRlciBpcyB1c2VkIHRvIGlkZW50aWZ5IGEgc3BlY2lmaWMgcHJvcGVydHkgYW1vbmcgbXVsdGlwbGUgaW5zdGFuY2VzLlxyXG4gICAqIEBraW5kIFByb3BlcnR5OiBQSURcclxuICAgKiBAbGluayBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjM1MCNzZWN0aW9uLTUuNVxyXG4gICAqL1xyXG4gIHBpZD86IHN0cmluZ1tdO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBUWVBFIHBhcmFtZXRlciBoYXMgbXVsdGlwbGUsIGRpZmZlcmVudCB1c2VzLlxyXG4gICAqIEluIGdlbmVyYWwsIGl0IGlzIGEgd2F5IG9mIHNwZWNpZnlpbmcgY2xhc3MgY2hhcmFjdGVyaXN0aWNzIG9mIHRoZSBhc3NvY2lhdGVkIHByb3BlcnR5LlxyXG4gICAqIEBraW5kIFByb3BlcnR5OiBUWVBFXHJcbiAgICogQGxpbmsgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzNTAjc2VjdGlvbi01LjZcclxuICAgKi9cclxuICB0eXBlPzpcclxuICAgIHwgQXJyYXk8J3dvcmsnIHwgJ2hvbWUnIHwgJ3RleHQnIHwgJ3ZvaWNlJyB8ICdmYXgnIHwgJ2NlbGwnIHwgJ3ZpZGVvJyB8ICdwYWdlcicgfCAndGV4dHBob25lJz5cclxuICAgIHwgJ3dvcmsnXHJcbiAgICB8ICdob21lJ1xyXG4gICAgfCAndGV4dCdcclxuICAgIHwgJ3ZvaWNlJ1xyXG4gICAgfCAnZmF4J1xyXG4gICAgfCAnY2VsbCdcclxuICAgIHwgJ3ZpZGVvJ1xyXG4gICAgfCAncGFnZXInXHJcbiAgICB8ICd0ZXh0cGhvbmUnO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBNRURJQVRZUEUgcGFyYW1ldGVyIGlzIHVzZWQgd2l0aCBwcm9wZXJ0aWVzIHdob3NlIHZhbHVlIGlzIGEgVVJJLlxyXG4gICAqIEBraW5kIFByb3BlcnR5OiBNRURJQVRZUEVcclxuICAgKiBAbGluayBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjM1MCNzZWN0aW9uLTUuN1xyXG4gICAqL1xyXG4gIG1lZGlhdHlwZT86IHN0cmluZztcclxuICAvKipcclxuICAgKiBUaGUgQ0FMU0NBTEUgcGFyYW1ldGVyIGlzIHVzZWQgdG8gZGVmaW5lIHRoZSBjYWxlbmRhciBzeXN0ZW0gaW4gd2hpY2ggYSBkYXRlIG9yIGRhdGUtdGltZSB2YWx1ZSBpcyBleHByZXNzZWQuXHJcbiAgICogQGtpbmQgUHJvcGVydHk6IENBTFNDQUxFXHJcbiAgICogQGxpbmsgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzNTAjc2VjdGlvbi01LjhcclxuICAgKi9cclxuICBjYWxzY2FsZT86ICdncmVnb3JpYW4nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBcInNvcnQtYXNcIiBwYXJhbWV0ZXIgaXMgdXNlZCB0byBzcGVjaWZ5IHRoZSBzdHJpbmcgdG8gYmUgdXNlZCBmb3IgbmF0aW9uYWwtbGFuZ3VhZ2Utc3BlY2lmaWMgc29ydGluZy5cclxuICAgKiBXaXRob3V0IHRoaXMgaW5mb3JtYXRpb24sIHNvcnRpbmcgYWxnb3JpdGhtcyBjb3VsZCBpbmNvcnJlY3RseSBzb3J0IHRoaXMgdkNhcmQgd2l0aGluIGEgc2VxdWVuY2Ugb2Ygc29ydGVkIHZDYXJkcy5cclxuICAgKiBAa2luZCBQcm9wZXJ0eTogU09SVC1BU1xyXG4gICAqIEBsaW5rIGh0dHBzOi8vdG9vbHMuaWV0Zi5vcmcvaHRtbC9yZmM2MzUwI3NlY3Rpb24tNS45XHJcbiAgICovXHJcbiAgc29ydGFzPzogc3RyaW5nW107XHJcbiAgLyoqXHJcbiAgICogVGhlIEdFTyBwYXJhbWV0ZXIgY2FuIGJlIHVzZWQgdG8gaW5kaWNhdGUgZ2xvYmFsIHBvc2l0aW9uaW5nIGluZm9ybWF0aW9uIHRoYXQgaXMgc3BlY2lmaWMgdG8gYW4gYWRkcmVzcy5cclxuICAgKiBAa2luZCBQcm9wZXJ0eTogR0VPXHJcbiAgICogQGxpbmsgaHR0cHM6Ly90b29scy5pZXRmLm9yZy9odG1sL3JmYzYzNTAjc2VjdGlvbi01LjEwXHJcbiAgICovXHJcbiAgZ2VvPzogc3RyaW5nO1xyXG4gIC8qKlxyXG4gICAqIFRoZSBUWiBwYXJhbWV0ZXIgY2FuIGJlIHVzZWQgdG8gaW5kaWNhdGUgdGltZSB6b25lIGluZm9ybWF0aW9uIHRoYXQgaXMgc3BlY2lmaWMgdG8gYW4gYWRkcmVzcy5cclxuICAgKiBAa2luZCBQcm9wZXJ0eTogVFpcclxuICAgKiBAbGluayBodHRwczovL3Rvb2xzLmlldGYub3JnL2h0bWwvcmZjNjM1MCNzZWN0aW9uLTUuMTFcclxuICAgKi9cclxuICB0aW1lem9uZT86IHN0cmluZztcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIHByb3BlcnR5VG9WQ2FyZFN0cmluZyhwcm9wZXJ0eTogQmFzaWNQcm9wZXJ0eVBhcmFtZXRlcnMpOiBzdHJpbmcge1xyXG4gIGxldCBzdHIgPSAnJztcclxuICBpZiAocHJvcGVydHkubGFuZ3VhZ2UpIHtcclxuICAgIHN0ciArPSAnO0xBTkdVQUdFPScgKyBlKHByb3BlcnR5Lmxhbmd1YWdlKTtcclxuICB9XHJcbiAgaWYgKHByb3BlcnR5LnZhbHVlKSB7XHJcbiAgICBzdHIgKz0gJztWQUxVRT0nICsgZShwcm9wZXJ0eS52YWx1ZSk7XHJcbiAgfVxyXG4gIGlmIChwcm9wZXJ0eS5hbHRpZCkge1xyXG4gICAgc3RyICs9ICc7QUxUSUQ9JyArIGUocHJvcGVydHkuYWx0aWQpO1xyXG4gIH1cclxuICBpZiAocHJvcGVydHkucGlkKSB7XHJcbiAgICBzdHIgKz0gJztQSUQ9JyArIHByb3BlcnR5LnBpZC5tYXAocyA9PiBlKHMpKS5qb2luKCcsJyk7XHJcbiAgfVxyXG4gIGlmIChwcm9wZXJ0eS50eXBlKSB7XHJcbiAgICBpZiAoQXJyYXkuaXNBcnJheShwcm9wZXJ0eS50eXBlKSkge1xyXG4gICAgICBpZiAocHJvcGVydHkudHlwZS5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICBzdHIgKz0gJztUWVBFPScgKyBwcm9wZXJ0eS50eXBlWzBdO1xyXG4gICAgICB9IGVsc2Uge1xyXG4gICAgICAgIHN0ciArPSAnO1RZUEU9XCInICsgcHJvcGVydHkudHlwZS5tYXAocyA9PiBzLnRvTG93ZXJDYXNlKCkpLmpvaW4oJywnKSArICdcIic7XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHN0ciArPSAnO1RZUEU9JyArIHByb3BlcnR5LnR5cGU7XHJcbiAgICB9XHJcbiAgfVxyXG4gIGlmIChwcm9wZXJ0eS5tZWRpYXR5cGUpIHtcclxuICAgIHN0ciArPSAnO01FRElBVFlQRT0nICsgZShwcm9wZXJ0eS5tZWRpYXR5cGUpO1xyXG4gIH1cclxuICBpZiAocHJvcGVydHkucHJlZikge1xyXG4gICAgc3RyICs9ICc7UFJFRj0nICsgcHJvcGVydHkucHJlZjtcclxuICB9XHJcbiAgaWYgKHByb3BlcnR5LmNhbHNjYWxlKSB7XHJcbiAgICBzdHIgKz0gJztDQUxTQ0FMRT0nICsgZShwcm9wZXJ0eS5jYWxzY2FsZSk7XHJcbiAgfVxyXG4gIGlmIChwcm9wZXJ0eS5zb3J0YXMpIHtcclxuICAgIHN0ciArPSAnO1NPUlQtQVM9XCInICsgcHJvcGVydHkuc29ydGFzLm1hcChzID0+IGUocykpLmpvaW4oJywnKSArICdcIic7XHJcbiAgfVxyXG4gIGlmIChwcm9wZXJ0eS5nZW8pIHtcclxuICAgIHN0ciArPSAnO0dFTz0nICsgZShwcm9wZXJ0eS5nZW8pO1xyXG4gIH1cclxuICBpZiAocHJvcGVydHkudGltZXpvbmUpIHtcclxuICAgIHN0ciArPSAnO1RaPScgKyBlKHByb3BlcnR5LnRpbWV6b25lKTtcclxuICB9XHJcblxyXG4gIHJldHVybiBzdHI7XHJcbn1cclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1Byb3BlcnR5V2l0aFBhcmFtZXRlcnMob2JqZWN0OiBhbnkpOiBvYmplY3QgaXMgeyB2YWx1ZT86IHN0cmluZzsgcGFyYW0/OiBCYXNpY1Byb3BlcnR5UGFyYW1ldGVycyB9IHtcclxuICBjb25zdCB0ZXN0ID0gPHsgdmFsdWU/OiBzdHJpbmc7IHBhcmFtPzogQmFzaWNQcm9wZXJ0eVBhcmFtZXRlcnMgfT5vYmplY3Q7XHJcbiAgaWYgKHRlc3QgPT0gbnVsbCB8fCB0ZXN0LnBhcmFtID09IG51bGwgfHwgdGVzdC52YWx1ZSA9PSBudWxsKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbiAgfVxyXG4gIHJldHVybiAoXHJcbiAgICB0ZXN0LnBhcmFtLmxhbmd1YWdlICE9PSB1bmRlZmluZWQgfHxcclxuICAgIHRlc3QucGFyYW0udmFsdWUgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5wcmVmICE9PSB1bmRlZmluZWQgfHxcclxuICAgIHRlc3QucGFyYW0uYWx0aWQgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5waWQgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS50eXBlICE9PSB1bmRlZmluZWQgfHxcclxuICAgIHRlc3QucGFyYW0ubWVkaWF0eXBlICE9PSB1bmRlZmluZWQgfHxcclxuICAgIHRlc3QucGFyYW0uY2Fsc2NhbGUgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5zb3J0YXMgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5nZW8gIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS50aW1lem9uZSAhPT0gdW5kZWZpbmVkXHJcbiAgKTtcclxufVxyXG5cclxuZXhwb3J0IGZ1bmN0aW9uIGlzUHJvcGVydHlXaXRoUGFyYW1ldGVyc0FkZHJlc3NWYWx1ZShcclxuICBvYmplY3Q6IGFueVxyXG4pOiBvYmplY3QgaXMgeyB2YWx1ZT86IEFkZHJlc3M7IHBhcmFtPzogQmFzaWNQcm9wZXJ0eVBhcmFtZXRlcnMgfSB7XHJcbiAgY29uc3QgdGVzdCA9IDx7IHZhbHVlPzogQWRkcmVzczsgcGFyYW0/OiBCYXNpY1Byb3BlcnR5UGFyYW1ldGVycyB9Pm9iamVjdDtcclxuICBpZiAodGVzdCA9PSBudWxsIHx8IHRlc3QucGFyYW0gPT0gbnVsbCB8fCB0ZXN0LnZhbHVlID09IG51bGwpIHtcclxuICAgIHJldHVybiBmYWxzZTtcclxuICB9XHJcbiAgcmV0dXJuIChcclxuICAgIHRlc3QucGFyYW0ubGFuZ3VhZ2UgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS52YWx1ZSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICB0ZXN0LnBhcmFtLnByZWYgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5hbHRpZCAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICB0ZXN0LnBhcmFtLnBpZCAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICB0ZXN0LnBhcmFtLnR5cGUgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5tZWRpYXR5cGUgIT09IHVuZGVmaW5lZCB8fFxyXG4gICAgdGVzdC5wYXJhbS5jYWxzY2FsZSAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICB0ZXN0LnBhcmFtLnNvcnRhcyAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICB0ZXN0LnBhcmFtLmdlbyAhPT0gdW5kZWZpbmVkIHx8XHJcbiAgICB0ZXN0LnBhcmFtLnRpbWV6b25lICE9PSB1bmRlZmluZWRcclxuICApO1xyXG59XHJcbiJdfQ==